<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Foresight.js Demo</title>

	<!-- Foresight Config-->
	<script>
		foresight = {
			options: { 
				testConn: true, 
				minKbpsForHighSpeedConn: 400,
				speedTestUri: '../speed-test/100K.jpg',
				speedTestKB: 100
			},

			oncomplete: function () {
				// oncomplete only being use to print out info, demo purposes only
				var info = [];
				info.push( 'Images: ' + foresight.images.length );
				info.push( 'Device Pixel Ratio: ' + foresight.devicePixelRatio );
				info.push( 'Check Connection Speed: ' + foresight.options.testConn );
				info.push( 'Connection Test Method: ' + foresight.connTestMethod );
				if( foresight.connTestMethod === 'skip' ) {
					info.push( 'No speed test completed because this device has a pixel ratio of 1, so no need' );
				} else {
					info.push( 'Min Kbps For High Speed Connection: ' + foresight.options.minKbpsForHighSpeedConn + 'Kbps' );
					info.push( 'Estimated Connection Speed: ' + foresight.connKbps + 'Kbps' );
					info.push( 'Is Considered High Speed Connection: ' + foresight.isHighSpeedConn );
				}
				document.getElementById('info').innerHTML = info.join('<br>');

				// print out img info above each foresight image
				for( var x = 0; x < foresight.images.length; x++ ) {
					var img = foresight.images[ x ];
					var imgInfo = [];
					imgInfo.push( 'Image: ' + x + ', ID: ' + img.id + ', ClassName: ' + img.className );
					imgInfo.push( 'Orginal Src: ' + img.orgSrc );
					imgInfo.push( 'Pixel Ratio: ' + img.pixelRatio );
					imgInfo.push( 'Src Modification Method: ' + img.srcModification );
					imgInfo.push( 'Width/Height: ' + img.width + 'x' + img.height );
					imgInfo.push( 'Requested Width/Height: ' + img.requestWidth + 'x' + img.requestHeight );
					imgInfo.push( 'Requested Src: ' + img.src );
					
					var pre = document.createElement( 'pre' );
					pre.innerHTML = imgInfo.join( '<br>' );
					img.parentElement.insertBefore( pre, img );
				}
			}
		};
	</script>
	<script src="../foresight.0.1.js"></script>
	<!--End Foresight-->

</head>
<body>

	<h2>Foresight.js Demo</h2>

	<pre id=info></pre>

	<p>
		<noscript data-img-src-modification="rebuildSrc" data-img-src-format="{protocol}://{host}{directory}{file}?w={width}&h={height}" data-img-src="http://m.remingtonproducts.com/~/media/Remington/Images/Mobile%20Banners/Mobile_HairTherapy.ashx" data-img-pixel-ratio="2" data-img-width="315" data-img-height="236">
			<img src="http://m.remingtonproducts.com/~/media/Remington/Images/Mobile%20Banners/Mobile_HairTherapy.ashx?w=315&h=236&bc=white" width="315" height="236" class="thumbimage">
		</noscript>
	</p>

	<p>
		<noscript data-img-src-modification="replaceDimensions" data-img-src="http://upload.wikimedia.org/wikipedia/commons/thumb/5/57/AmericanBadger.JPG/315px-AmericanBadger.JPG" data-img-pixel-ratio="1.5" data-img-width="315" data-img-height="236" data-img-id="badgerImg" data-img-class='myClass'>
			<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/5/57/AmericanBadger.JPG/315px-AmericanBadger.JPG" width="315" height="236">
		</noscript>
	</p>

</body>
</html>